<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>IOTest</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta charset="UTF-8">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link href='http://fonts.googleapis.com/css?family=Signika:600,400,300,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="common.css">
</head>
<body>
<div id="preload">
  <div id="rot-preload" style="width:50px;height:50px;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;z-index:999;">
    <svg  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50px" height="50px" viewBox="0 0 50 50" x="0px" y="0px">
      <circle cx="25" cy="25" r="20" stroke="#FFF" stroke-width="6" fill="none" stroke-dasharray="0.01 16"  stroke-linecap="round" />
    </svg>
  </div>
</div>
<div id="all-wrap">
<div id="bg-preload" class="bg-image">
</div>
<div class="navwrap">
<ul id="nav">
<li style="width:100px;">&nbsp;</li>
<li><a href="#">Home</a></li>
<li><a href="#">About Us</a>
	<ul>
		<li><a href="#">Contact&nbsp;us&nbsp;ASAP</a></li>
		<li><a href="#">Map</a></li>
		<li><a href="#">Standards</a></li>
	</ul>
</li>
<li><a href="#">Products</a>
<ul>
		<li><a href="#">Contact</a></li>
		<li><a href="#">Map</a></li>
		<li><a href="#">Standards&nbsp;of&nbsp;the&nbsp;Indutry</a></li>
	</ul></li>
</ul>
</div>
<div class="clear"></div>
<div class="tac semitrans shadow-txt1 animated anim-delay02 fadeInDown">
<h1>Welcome to Mezygirya Residence</h1>
<p>The place where ex-president Yanukovich was happy.</p>
</div>
<div class="tac" style="width:100%">
<div style="width:50px;height:50px;display:block;position:relative;top:180px;left:0;right:0;margin:auto;">
  <div id="dash-wait" class="animated fadeOutZoom anim-delay4s" style="width:50px;height:50px;position:absolute;top:0px;z-index:910;">
    <svg  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50px" height="50px" viewBox="0 0 50 50" x="0px" y="0px">
    	<circle cx="25" cy="25" r="20" stroke="#FFF" stroke-width="6" fill="none" stroke-dasharray="0.01 16"  stroke-linecap="round" />
    </svg>
  </div>
  <div id="reload" class="animated fadeInZoom anim-delay5s" style="width:50px;height:50px;position:absolute;top:0px;z-index:920;">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50px" height="50px" viewBox="0 0 50 50" x="0px" y="0px">
      <path d="M 25 42 A 15 15 0 1 0 10 27" fill="none" stroke="#000" style="opacity:0.5" stroke-width="4" />
      <polygon points="2,27 18,27 10,34" fill="#000" style="opacity:0.5" stroke="none" />
      <path d="M 25 40 A 15 15 0 1 0 10 25" fill="none" stroke="#FFF" stroke-width="4" />
      <polygon points="2,25 18,25 10,32" fill="#FFF" stroke="none" />
    </svg>
  </div>
</div>
</div>
<div id="center_media">
<div style="position: absolute; top:203px; left: 854px; width:200px; height: 200px;z-index:500" class="animated fadeInZoom anim-delay2s">
<svg id="circle" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200">
  <circle cx="0" cy="0" r="40" stroke="#FFF" stroke-width="4" fill="none" />
  <circle cx="0" cy="0" r="34" stroke="#FFF" stroke-width="2" fill="none" style="opacity:0.4"/>
  <circle cx="0" cy="0" r="6" stroke="#FFF" stroke-width="4" fill="none" style="opacity:0.3"/>
</svg>
</div>
<h3 class="tsize1 animated fadeInRight anim-delay1s" style="position: absolute; top:130px; left: 150px;">HTML5 Web Motion </h3>
<h3 class="tsize3  animated fadeInLeft anim-delay2s" style="position: absolute; top:140px; left: 300px;">CSS Magics</h3>
<div class="tsize2 animated fadeInLeft anim-delay2s" style="position: absolute; top:85px; left: 720px;width:250px; height:220px; border: solid 1px #CCC;">
  <img src="imgs/yanukovich01.jpg" width="250" height="220" alt="Yanukovich" />
</div>
<h3 class="tsize2 animated fadeInRight anim-delay3s" style="position: absolute; top:330px; left: 250px;">Interactive Web Design</h3>

<div id="b_box" class="animated fadeInZoom anim-delay4s tsize1" style="position: absolute; top:320px; left:480px;">
Start Tour
</div>
</div>
<div id="footer" class="footer tac animated fadeInUp anim-delay5s">
<div id="scroll-arrow" style="height:50px;width:80px;cursor:pointer;left:0;right:0;margin:auto;">
<svg height="50" width="80">
<polyline points="20,14 40,34 60,14" stroke-linecap="round"
  style="fill:none;stroke:#000;stroke-width:4;opacity:0.5;" />
  <polyline points="20,10 40,30 60,10" stroke-linecap="round"
  style="fill:none;stroke:#FFF;stroke-width:4;" />
</svg>
</div>
</div>
<div id="scroll-content" class="tac">
<div class="ttable">
<div class="trow">
<div class="l-cell">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="50" width="50" x="0px" y="0px">
  <rect id="t-rect" x="15" y="0"  rx="4" ry="4" width="35" height="50"/>
  <polyline id="r-arrow" points="40,10 26,25 40,40" stroke-linecap="round" fill="none" stroke="#FFF" stroke-width="4" />
</svg>
</div>
<div class="c-cell">
  <div id="slider"></div>
</div>
<div class="r-cell">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="50" width="50" x="0px" y="0px">
  <rect id="t-rect2" x="0" y="0"  rx="4" ry="4" width="35" height="50" />
  <polyline points="10,10 24,25 10,40" stroke-linecap="round" style="fill:none;stroke:#FFF;stroke-width:4;z-index:999;opacity:1" />
</svg>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript">
// retrieve the element
element = document.getElementById("b_box");

// reset the transition by...
element.addEventListener("click", function(e) {
  e.preventDefault;
  
  // -> removing the class
  element.classList.remove("animated");
  element.classList.remove("fadeInZoom");
  element.classList.remove("anim-delay4s");
  element.classList.remove("anim-delay02s");
  
  
  // -> triggering reflow /* The actual magic */
  // without this it wouldn't work. Try uncommenting the line and the transition won't be retriggered.
  element.offsetWidth = element.offsetWidth;
  
  // -> and re-adding the class
  element.classList.add("animated");
  element.classList.add("fadeInZoom");
  element.classList.add("anim-delay02s");
}, false);

  var scroll_flag=false;
  var foo=$("#footer");
  var current_slide=0;
  var items = [];

$(document).ready(function(){

 /* function preload(arrayOfImages) {
    $(arrayOfImages).each(function(){
        $('<img/>')[0].src = this;
        // Alternatively you could use:
        // (new Image()).src = this;
    });
  }

// Usage:

preload([
    'imgs/honka-bg.jpg',
    'imgs/yanukovich01.jpg',
    'imgs/slides/slide01.jpg',
    'imgs/slides/slide02.jpg',
    'imgs/slides/slide03.jpg',
    'imgs/slides/slide04.jpg',
    'imgs/slides/slide05.jpg',
    'imgs/slides/slide06.jpg',
]);*/
  

var bg_url = 'imgs/honka-bg.jpg';

// preloading...
var img = new Image();
img.onload = function()
{
    // do transitions here...
    $("#all-wrap").css("visibility","visible");
    $("#preload").css("visibility","hidden");
    $("#preload").remove();
};
img.src = bg_url;


console.log(bg_url);


  $(window).scroll(scroller);
  $("#scroll-arrow").click(scroller);

  setTimeout(function(){
      $("#dash-wait").fadeOut(1000);
      $("#reload").css("visibility","visible");
      $("#reload").css("cursor","pointer");
      $("#reload").click(function(){ location.replace("index.html");});
  },5000);

	function scroller(e){

			if(!scroll_flag) {

				scroll_flag=true;

				foo.removeClass("fadeInUp");
				foo.removeClass("animated");
				foo.removeClass("anim-delay5s");

				foo.addClass("animated");
				foo.addClass("fadeOutDown");
				foo.addClass("anim-delay02s");

				$("#center_media").fadeOut(1000);

        $.getJSON( "slides.json", function(data) {

            
              $.each( data.slides, function( key, val ) {
                
                var img_html='<img src="' + val.uri + '"  width="'+val.w+'" height="'+val.h+'" class="one-slide animated anim-delay0 fadeIn" /><p>'+val.desc+'</p>';
                console.log(img_html);
                items.push(img_html);
                (new Image()).src = val.uri;
              });
          
            //console.log(img_html);
           //var src=data.items[0].slides.uri;
              //var width=data.slides[0].w;
              //var height=data.slides[0].h;

                $("#slider").html(items[0]);

               //console.log( "success - " + items[current_slide].uri);
          })
            .done(function() {
              console.log( "second success" );
            })
            .fail(function() {
              console.log( "error" );
            })
            .always(function() {
              console.log( "complete" );
            });
            

				setTimeout(function(){
          //$("#scroll-content").load("scroll-content.html");

            $("#scroll-content").css("visibility","visible");

             $("#scroll-content").css("background-color","rgba(0,0,0,0.5)");

          //$("#scroll-content").css("display","block");

            

            $("#center_media").remove();

            $(".r-cell").click(function(){
              
              current_slide++;

              if(current_slide >= items.length) current_slide=0; //Loop slides

              $("#slider").html(items[current_slide]);

            });

            $(".l-cell").click(function(){
              
              current_slide--;

              if(current_slide < 0) current_slide=items.length-1; //Loop slides

              $("#slider").html(items[current_slide]);

            });

        }, 1000);


			}

	}




});



</script>

</body>
</html>

